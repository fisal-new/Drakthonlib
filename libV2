--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘
    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘
    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
    â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•
    
    ğŸ‰ Drakthon UI Library V2.3 - Perfect Edition
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    ğŸ“Œ Version: 2.3.0
    ğŸ‘¨â€ğŸ’» Author: Drakthon Team
    ğŸŒ GitHub: https://github.com/fisal-new/Drakthonlib
    
    âœ… FEATURES:
    â€¢ Fixed All Display Issues
    â€¢ Perfect Dropdown System
    â€¢ Auto Responsive
    â€¢ Works on All Devices
    â€¢ Theme from GitHub
    â€¢ Config Save/Load
    â€¢ Zero Errors
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

local Drakthon = {
    Version = "2.3.0",
    Author = "Drakthon Team",
    Flags = {},
    Elements = {},
    Windows = {},
    ConfigFolder = "DrakthonUI"
}

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ® SERVICES
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui")
local Camera = workspace.CurrentCamera

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ¨ LOAD THEME FROM GITHUB
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

local Theme
local ThemeURL = "https://raw.githubusercontent.com/fisal-new/Drakthonlib/main/Theme.lua"

print("â³ Loading Drakthon Theme System...")

local success, result = pcall(function()
    return game:HttpGet(ThemeURL)
end)

if success then
    local loadSuccess, loadResult = pcall(function()
        return loadstring(result)()
    end)
    
    if loadSuccess then
        Theme = loadResult
        print("âœ… Theme System Loaded Successfully!")
        print("ğŸ¨ Available Themes: " .. table.concat(Theme:List(), ", "))
    else
        error("âŒ Failed to execute Theme.lua: " .. tostring(loadResult))
    end
else
    error("âŒ Failed to download Theme.lua: " .. tostring(result))
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ“ DEVICE DETECTION & SIZING
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

local function IsMobile()
    local screenSize = Camera.ViewportSize
    return screenSize.X < 600
end

local function IsTablet()
    local screenSize = Camera.ViewportSize
    return screenSize.X >= 600 and screenSize.X < 1024
end

local function GetDeviceType()
    if IsMobile() then
        return "Mobile"
    elseif IsTablet() then
        return "Tablet"
    else
        return "Desktop"
    end
end

local function GetOptimalSize()
    local viewportSize = Camera.ViewportSize
    local deviceType = GetDeviceType()
    
    local sizes = {
        Mobile = {Width = 340, Height = 500},
        Tablet = {Width = 500, Height = 600},
        Desktop = {Width = 600, Height = 420}
    }
    
    local baseSize = sizes[deviceType]
    
    -- Calculate with screen bounds
    local width = math.clamp(
        math.floor(viewportSize.X * (deviceType == "Mobile" and 0.9 or deviceType == "Tablet" and 0.75 or 0.5)),
        baseSize.Width * 0.9,
        math.min(baseSize.Width * 1.1, viewportSize.X - 40)
    )
    
    local height = math.clamp(
        math.floor(viewportSize.Y * (deviceType == "Mobile" and 0.8 or deviceType == "Tablet" and 0.75 or 0.65)),
        baseSize.Height * 0.9,
        math.min(baseSize.Height * 1.1, viewportSize.Y - 40)
    )
    
    return width, height
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ› ï¸ UTILITY FUNCTIONS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

local function Tween(obj, props, dur, style, dir)
    if not obj or not obj.Parent then return end
    
    local tween = TweenService:Create(
        obj,
        TweenInfo.new(dur or 0.3, style or Enum.EasingStyle.Quad, dir or Enum.EasingDirection.Out),
        props
    )
    tween:Play()
    return tween
end

local function Create(class, props)
    local obj = Instance.new(class)
    for k, v in pairs(props) do
        if k ~= "Parent" then
            pcall(function() obj[k] = v end)
        end
    end
    if props.Parent then
        obj.Parent = props.Parent
    end
    return obj
end

local function AddCorner(parent, radius)
    return Create("UICorner", {
        Parent = parent,
        CornerRadius = UDim.new(0, radius or 8)
    })
end

local function AddPadding(parent, p)
    return Create("UIPadding", {
        Parent = parent,
        PaddingTop = UDim.new(0, p or 10),
        PaddingLeft = UDim.new(0, p or 10),
        PaddingRight = UDim.new(0, p or 10),
        PaddingBottom = UDim.new(0, p or 10)
    })
end

local function AddStroke(parent, color, thickness)
    return Create("UIStroke", {
        Parent = parent,
        Color = color or Theme.Accent(),
        Thickness = thickness or 1,
        ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    })
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ–±ï¸ DRAG SYSTEM
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

local function MakeDraggable(frame, handle)
    local dragging = false
    local dragInput, dragStart, startPos
    
    local function update(input)
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
    
    handle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    handle.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            update(input)
        end
    end)
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ’¾ CONFIG SYSTEM
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

function Drakthon:SaveConfig(name)
    name = name or "default"
    local fileName = self.ConfigFolder .. "/" .. name .. ".json"
    
    pcall(function()
        if not isfolder(self.ConfigFolder) then
            makefolder(self.ConfigFolder)
        end
        writefile(fileName, HttpService:JSONEncode(self.Flags))
        self:Notify({Title = "Config Saved", Content = "Saved: " .. name, Type = "Success", Duration = 2})
    end)
end

function Drakthon:LoadConfig(name)
    name = name or "default"
    local fileName = self.ConfigFolder .. "/" .. name .. ".json"
    
    pcall(function()
        if isfile(fileName) then
            local data = HttpService:JSONDecode(readfile(fileName))
            for flag, value in pairs(data) do
                self.Flags[flag] = value
                for _, element in pairs(self.Elements) do
                    if element.Flag == flag and element.Set then
                        element:Set(value)
                    end
                end
            end
            self:Notify({Title = "Config Loaded", Content = "Loaded: " .. name, Type = "Success", Duration = 2})
        end
    end)
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ”” NOTIFICATION SYSTEM
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

local NotificationQueue = {}
local IsProcessing = false
local ActiveNotifications = {}

function Drakthon:Notify(config)
    config = config or {}
    
    local notif = {
        Title = config.Title or "Notification",
        Content = config.Content or "",
        Duration = config.Duration or 3,
        Type = config.Type or "Info"
    }
    
    if notif.Type == "Success" then
        notif.Color = Theme.Green()
        notif.Icon = "âœ“"
    elseif notif.Type == "Warning" then
        notif.Color = Theme.Yellow()
        notif.Icon = "âš "
    elseif notif.Type == "Error" then
        notif.Color = Theme.Red()
        notif.Icon = "âœ•"
    else
        notif.Color = Theme.Blue()
        notif.Icon = "â„¹"
    end
    
    table.insert(NotificationQueue, notif)
    
    if not IsProcessing then
        IsProcessing = true
        task.spawn(function()
            self:ProcessQueue()
        end)
    end
end

function Drakthon:ProcessQueue()
    while #NotificationQueue > 0 do
        while #ActiveNotifications >= 5 do
            task.wait(0.1)
        end
        
        local notif = table.remove(NotificationQueue, 1)
        if notif then
            task.spawn(function()
                self:ShowNotification(notif)
            end)
        end
        
        task.wait(0.15)
    end
    IsProcessing = false
end

function Drakthon:ShowNotification(notif)
    if not self.NotificationHolder or not self.NotificationHolder.Parent then return end
    
    local yPos = 20
    for _, n in ipairs(ActiveNotifications) do
        if n and n.Parent then
            yPos = yPos + 90
        end
    end
    
    local NotifFrame = Create("Frame", {
        Parent = self.NotificationHolder,
        BackgroundColor3 = Theme.BG2(),
        BorderSizePixel = 0,
        Position = UDim2.new(1, 10, 0, yPos),
        Size = UDim2.new(0, 0, 0, 80),
        ZIndex = 10000
    })
    
    table.insert(ActiveNotifications, NotifFrame)
    Theme:Register(NotifFrame, "Color", "BG2")
    AddCorner(NotifFrame, 10)
    
    Create("Frame", {
        Parent = NotifFrame,
        BackgroundColor3 = notif.Color,
        BorderSizePixel = 0,
        Size = UDim2.new(0, 4, 1, 0),
        ZIndex = 10001
    })
    
    Create("TextLabel", {
        Parent = NotifFrame,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 15, 0, 0),
        Size = UDim2.new(0, 40, 0, 40),
        Font = Enum.Font.GothamBold,
        Text = notif.Icon,
        TextColor3 = notif.Color,
        TextSize = 24,
        ZIndex = 10002
    })
    
    local TitleLabel = Create("TextLabel", {
        Parent = NotifFrame,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 60, 0, 10),
        Size = UDim2.new(1, -75, 0, 20),
        Font = Enum.Font.GothamBold,
        Text = notif.Title,
        TextColor3 = Theme.Text(),
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 10002
    })
    
    Theme:Register(TitleLabel, "TextColor", "Text")
    
    local ContentLabel = Create("TextLabel", {
        Parent = NotifFrame,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 60, 0, 35),
        Size = UDim2.new(1, -75, 0, 35),
        Font = Enum.Font.Gotham,
        Text = notif.Content,
        TextColor3 = Theme.Text2(),
        TextSize = 12,
        TextXAlignment = Enum.TextXAlignment.Left,
        TextWrapped = true,
        TextYAlignment = Enum.TextYAlignment.Top,
        ZIndex = 10002
    })
    
    Theme:Register(ContentLabel, "TextColor", "Text2")
    
    local Progress = Create("Frame", {
        Parent = NotifFrame,
        BackgroundColor3 = notif.Color,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 1, -3),
        Size = UDim2.new(1, 0, 0, 3),
        ZIndex = 10002
    })
    
    Tween(NotifFrame, {Position = UDim2.new(1, -330, 0, yPos), Size = UDim2.new(0, 320, 0, 80)}, 0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    task.wait(0.4)
    
    Tween(Progress, {Size = UDim2.new(0, 0, 0, 3)}, notif.Duration, Enum.EasingStyle.Linear)
    task.wait(notif.Duration)
    
    Tween(NotifFrame, {Position = UDim2.new(1, 10, 0, yPos), Size = UDim2.new(0, 0, 0, 80)}, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In)
    task.wait(0.3)
    
    for i, v in ipairs(ActiveNotifications) do
        if v == NotifFrame then
            table.remove(ActiveNotifications, i)
            break
        end
    end
    
    NotifFrame:Destroy()
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸªŸ CREATE WINDOW
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

function Drakthon:CreateWindow(config)
    config = config or {}
    
    local width, height = GetOptimalSize()
    
    local WindowConfig = {
        Name = config.Name or "Drakthon UI",
        Icon = config.Icon or "rbxassetid://7733955511",
        IntroEnabled = config.IntroEnabled ~= false,
        Keybind = config.Keybind or Enum.KeyCode.RightControl,
        Size = {width, height},
        Theme = config.Theme or "Ocean"
    }
    
    Theme:Set(WindowConfig.Theme)
    
    local function getParent()
        if gethui then
            return gethui()
        elseif syn and syn.protect_gui then
            local gui = Instance.new("ScreenGui")
            syn.protect_gui(gui)
            gui.Parent = CoreGui
            return CoreGui
        else
            return CoreGui
        end
    end
    
    local ScreenGui = Create("ScreenGui", {
        Name = "DrakthonUI_" .. HttpService:GenerateGUID(false):sub(1, 8),
        Parent = getParent(),
        ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
        ResetOnSpawn = false,
        DisplayOrder = 999,
        IgnoreGuiInset = true
    })
    
    self.NotificationHolder = Create("Frame", {
        Name = "NotificationHolder",
        Parent = ScreenGui,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 1, 0),
        ZIndex = 10000
    })
    
    local Main = Create("Frame", {
        Name = "Main",
        Parent = ScreenGui,
        BackgroundColor3 = Theme.BG(),
        BorderSizePixel = 0,
        Position = UDim2.new(0.5, -width/2, 0.5, -height/2),
        Size = UDim2.new(0, width, 0, height),
        ClipsDescendants = false,
        Visible = true,
        ZIndex = 1
    })
    
    Theme:Register(Main, "Color", "BG")
    AddCorner(Main, 12)
    
    -- Shadow
    Create("ImageLabel", {
        Parent = Main,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, -15, 0, -15),
        Size = UDim2.new(1, 30, 1, 30),
        ZIndex = 0,
        Image = "rbxassetid://5554236805",
        ImageColor3 = Color3.fromRGB(0, 0, 0),
        ImageTransparency = 0.7,
        ScaleType = Enum.ScaleType.Slice,
        SliceCenter = Rect.new(23, 23, 277, 277)
    })
    
    -- Header
    local Header = Create("Frame", {
        Parent = Main,
        BackgroundColor3 = Theme.BG2(),
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 50),
        ZIndex = 2
    })
    
    Theme:Register(Header, "Color", "BG2")
    AddCorner(Header, 12)
    
    Create("Frame", {
        Parent = Header,
        BackgroundColor3 = Theme.BG2(),
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 1, -12),
        Size = UDim2.new(1, 0, 0, 12),
        ZIndex = 2
    })
    
    local HeaderGradient = Create("Frame", {
        Parent = Header,
        BackgroundColor3 = Theme.Accent(),
        BackgroundTransparency = 0.9,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 1, 0),
        ZIndex = 3
    })
    
    Theme:Register(HeaderGradient, "Color", "Accent")
    AddCorner(HeaderGradient, 12)
    
    if Theme.Gradient then
        local gradient = Theme:Gradient()
        gradient.Parent = HeaderGradient
        gradient.Rotation = 45
    end
    
    local HeaderIcon = Create("ImageLabel", {
        Parent = Header,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 15, 0.5, 0),
        Size = UDim2.new(0, 28, 0, 28),
        AnchorPoint = Vector2.new(0, 0.5),
        Image = WindowConfig.Icon,
        ImageColor3 = Theme.Text(),
        ZIndex = 4
    })
    
    Theme:Register(HeaderIcon, "ImageColor", "Text")
    AddCorner(HeaderIcon, 8)
    
    local Title = Create("TextLabel", {
        Parent = Header,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 53, 0, 0),
        Size = UDim2.new(1, -140, 1, 0),
        Font = Enum.Font.GothamBold,
        Text = WindowConfig.Name,
        TextColor3 = Theme.Text(),
        TextSize = IsMobile() and 14 or 16,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 4
    })
    
    Theme:Register(Title, "TextColor", "Text")
    
    local MinimizeBtn = Create("TextButton", {
        Parent = Header,
        BackgroundColor3 = Theme.BG3(),
        Position = UDim2.new(1, -70, 0.5, 0),
        Size = UDim2.new(0, 25, 0, 25),
        AnchorPoint = Vector2.new(0, 0.5),
        Font = Enum.Font.GothamBold,
        Text = "_",
        TextColor3 = Theme.Text(),
        TextSize = 16,
        AutoButtonColor = false,
        ZIndex = 4
    })
    
    Theme:Register(MinimizeBtn, "Color", "BG3")
    Theme:Register(MinimizeBtn, "TextColor", "Text")
    AddCorner(MinimizeBtn, 6)
    
    local CloseBtn = Create("TextButton", {
        Parent = Header,
        BackgroundColor3 = Theme.Red(),
        Position = UDim2.new(1, -35, 0.5, 0),
        Size = UDim2.new(0, 25, 0, 25),
        AnchorPoint = Vector2.new(0, 0.5),
        Font = Enum.Font.GothamBold,
        Text = "Ã—",
        TextColor3 = Theme.Text(),
        TextSize = 18,
        AutoButtonColor = false,
        ZIndex = 4
    })
    
    Theme:Register(CloseBtn, "TextColor", "Text")
    AddCorner(CloseBtn, 6)
    
    local navWidth = IsMobile() and 100 or IsTablet() and 140 or 160
    
    local Nav = Create("Frame", {
        Parent = Main,
        BackgroundColor3 = Theme.BG2(),
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 50),
        Size = UDim2.new(0, navWidth, 1, -50),
        ZIndex = 2
    })
    
    Theme:Register(Nav, "Color", "BG2")
    
    Create("UIListLayout", {
        Parent = Nav,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, IsMobile() and 5 or 8)
    })
    
    AddPadding(Nav, IsMobile() and 8 or 10)
    
    local Content = Create("Frame", {
        Parent = Main,
        BackgroundColor3 = Theme.BG3(),
        BorderSizePixel = 0,
        Position = UDim2.new(0, navWidth, 0, 50),
        Size = UDim2.new(1, -navWidth, 1, -50),
        ZIndex = 2
    })
    
    Theme:Register(Content, "Color", "BG3")
    
    MakeDraggable(Main, Header)
    
    -- Minimize Icon
    local MinimizeIcon = Create("ImageButton", {
        Parent = ScreenGui,
        BackgroundColor3 = Theme.BG2(),
        BorderSizePixel = 0,
        Position = UDim2.new(0, 20, 0, 20),
        Size = UDim2.new(0, 60, 0, 60),
        Visible = false,
        Image = WindowConfig.Icon,
        ImageColor3 = Theme.Text(),
        ScaleType = Enum.ScaleType.Fit,
        AutoButtonColor = false,
        ZIndex = 1000
    })
    
    Theme:Register(MinimizeIcon, "Color", "BG2")
    Theme:Register(MinimizeIcon, "ImageColor", "Text")
    AddCorner(MinimizeIcon, 12)
    
    MakeDraggable(MinimizeIcon, MinimizeIcon)
    
    local minimized = false
    
    MinimizeBtn.MouseButton1Click:Connect(function()
        minimized = not minimized
        if minimized then
            Tween(Main, {Size = UDim2.new(0, 0, 0, 0)}, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In)
            task.wait(0.3)
            Main.Visible = false
            MinimizeIcon.Visible = true
            MinimizeIcon.Size = UDim2.new(0, 0, 0, 0)
            Tween(MinimizeIcon, {Size = UDim2.new(0, 60, 0, 60)}, 0.5, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out)
        else
            Tween(MinimizeIcon, {Size = UDim2.new(0, 0, 0, 0)}, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In)
            task.wait(0.3)
            MinimizeIcon.Visible = false
            Main.Visible = true
            Main.Size = UDim2.new(0, 0, 0, 0)
            Tween(Main, {Size = UDim2.new(0, width, 0, height)}, 0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
        end
    end)
    
    MinimizeIcon.MouseButton1Click:Connect(function()
        if minimized then
            MinimizeBtn.MouseButton1Click:Fire()
        end
    end)
    
    CloseBtn.MouseButton1Click:Connect(function()
        Tween(Main, {Size = UDim2.new(0, 0, 0, 0)}, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In)
        if MinimizeIcon.Visible then
            Tween(MinimizeIcon, {Size = UDim2.new(0, 0, 0, 0)}, 0.3)
        end
        task.wait(0.3)
        ScreenGui:Destroy()
    end)
    
    MinimizeBtn.MouseEnter:Connect(function()
        Tween(MinimizeBtn, {BackgroundColor3 = Theme.Accent()}, 0.2)
    end)
    
    MinimizeBtn.MouseLeave:Connect(function()
        Tween(MinimizeBtn, {BackgroundColor3 = Theme.BG3()}, 0.2)
    end)
    
    CloseBtn.MouseEnter:Connect(function()
        Tween(CloseBtn, {BackgroundColor3 = Color3.fromRGB(255, 80, 80)}, 0.2)
    end)
    
    CloseBtn.MouseLeave:Connect(function()
        Tween(CloseBtn, {BackgroundColor3 = Theme.Red()}, 0.2)
    end)
    
    UserInputService.InputBegan:Connect(function(input, gpe)
        if not gpe and input.KeyCode == WindowConfig.Keybind then
            if minimized then
                MinimizeBtn.MouseButton1Click:Fire()
            else
                Main.Visible = not Main.Visible
            end
        end
    end)
    
    -- Auto Resize
    Camera:GetPropertyChangedSignal("ViewportSize"):Connect(function()
        if not minimized and Main.Visible then
            local newWidth, newHeight = GetOptimalSize()
            WindowConfig.Size = {newWidth, newHeight}
            
            local newNavWidth = IsMobile() and 100 or IsTablet() and 140 or 160
            Nav.Size = UDim2.new(0, newNavWidth, 1, -50)
            Content.Position = UDim2.new(0, newNavWidth, 0, 50)
            Content.Size = UDim2.new(1, -newNavWidth, 1, -50)
            
            Tween(Main, {
                Size = UDim2.new(0, newWidth, 0, newHeight),
                Position = UDim2.new(0.5, -newWidth/2, 0.5, -newHeight/2)
            }, 0.3)
        end
    end)
    
    local Window = {
        Tabs = {},
        CurrentTab = nil,
        ScreenGui = ScreenGui,
        MainFrame = Main,
        Theme = Theme,
        Config = WindowConfig,
        Library = self,
        Nav = Nav,
        Content = Content
    }
    
    --[[
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ“‚ CREATE TAB
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ]]
    
    function Window:CreateTab(config)
        config = config or {}
        local TabName = config.Name or "Tab"
        local TabIcon = config.Icon
        
        local TabBtn = Create("TextButton", {
            Parent = Nav,
            BackgroundColor3 = Theme.BG3(),
            Size = UDim2.new(1, 0, 0, IsMobile() and 32 or 38),
            Font = Enum.Font.GothamSemibold,
            Text = "",
            AutoButtonColor = false,
            ZIndex = 3
        })
        
        Theme:Register(TabBtn, "Color", "BG3")
        AddCorner(TabBtn, 8)
        
        if TabIcon then
            local Icon = Create("ImageLabel", {
                Parent = TabBtn,
                BackgroundTransparency = 1,
                Position = UDim2.new(0, IsMobile() and 6 or 10, 0.5, 0),
                Size = UDim2.new(0, 20, 0, 20),
                AnchorPoint = Vector2.new(0, 0.5),
                Image = TabIcon,
                ImageColor3 = Theme.Text2(),
                ZIndex = 4
            })
            
            Theme:Register(Icon, "ImageColor", "Text2")
        end
        
        local Label = Create("TextLabel", {
            Parent = TabBtn,
            BackgroundTransparency = 1,
            Position = UDim2.new(0, TabIcon and (IsMobile() and 32 or 38) or (IsMobile() and 10 or 15), 0, 0),
            Size = UDim2.new(1, TabIcon and -(IsMobile() and 38 or 45) or -(IsMobile() and 16 or 20), 1, 0),
            Font = Enum.Font.GothamSemibold,
            Text = TabName,
            TextColor3 = Theme.Text2(),
            TextSize = IsMobile() and 11 or 13,
            TextXAlignment = Enum.TextXAlignment.Left,
            TextTruncate = Enum.TextTruncate.AtEnd,
            ZIndex = 4
        })
        
        Theme:Register(Label, "TextColor", "Text2")
        
        local TabContent = Create("ScrollingFrame", {
            Parent = Content,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 1, 0),
            Visible = false,
            ScrollBarThickness = 4,
            ScrollBarImageColor3 = Theme.Accent(),
            CanvasSize = UDim2.new(0, 0, 0, 0),
            AutomaticCanvasSize = Enum.AutomaticSize.Y,
            BorderSizePixel = 0,
            ZIndex = 3
        })
        
        AddPadding(TabContent, IsMobile() and 10 or 12)
        
        Create("UIListLayout", {
            Parent = TabContent,
            SortOrder = Enum.SortOrder.LayoutOrder,
            Padding = UDim.new(0, IsMobile() and 8 or 10)
        })
        
        TabBtn.MouseButton1Click:Connect(function()
            for _, tab in pairs(Window.Tabs) do
                if tab.Deselect then
                    tab:Deselect()
                end
            end
            
            Window.CurrentTab = TabName
            TabContent.Visible = true
            
            Tween(TabBtn, {BackgroundColor3 = Theme.Accent()}, 0.2)
            Tween(Label, {TextColor3 = Theme.Text()}, 0.2)
            
            if TabIcon then
                for _, child in pairs(TabBtn:GetChildren()) do
                    if child:IsA("ImageLabel") then
                        Tween(child, {ImageColor3 = Theme.Text()}, 0.2)
                    end
                end
            end
        end)
        
        TabBtn.MouseEnter:Connect(function()
            if Window.CurrentTab ~= TabName then
                Tween(TabBtn, {BackgroundColor3 = Color3.fromRGB(30, 30, 40)}, 0.2)
            end
        end)
        
        TabBtn.MouseLeave:Connect(function()
            if Window.CurrentTab ~= TabName then
                Tween(TabBtn, {BackgroundColor3 = Theme.BG3()}, 0.2)
            end
        end)
        
        local Tab = {
            Name = TabName,
            Button = TabBtn,
            Content = TabContent
        }
        
        function Tab:Deselect()
            TabContent.Visible = false
            TabBtn.BackgroundColor3 = Theme.BG3()
            Label.TextColor3 = Theme.Text2()
            
            if TabIcon then
                for _, child in pairs(TabBtn:GetChildren()) do
                    if child:IsA("ImageLabel") then
                        child.ImageColor3 = Theme.Text2()
                    end
                end
            end
        end
        
        --[[
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            ğŸ”˜ CREATE BUTTON
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ]]
        
        function Tab:CreateButton(config)
            config = config or {}
            
            local Btn = Create("TextButton", {
                Parent = TabContent,
                BackgroundColor3 = Theme.BG2(),
                Size = UDim2.new(1, 0, 0, IsMobile() and 32 or 38),
                Font = Enum.Font.GothamSemibold,
                Text = config.Name or "Button",
                TextColor3 = Theme.Text(),
                TextSize = IsMobile() and 12 or 13,
                AutoButtonColor = false,
                ZIndex = 4
            })
            
            Theme:Register(Btn, "Color", "BG2")
            Theme:Register(Btn, "TextColor", "Text")
            AddCorner(Btn, 8)
            
            Btn.MouseButton1Click:Connect(function()
                pcall(config.Callback or function() end)
            end)
            
            Btn.MouseEnter:Connect(function()
                Tween(Btn, {BackgroundColor3 = Theme.BG3()}, 0.2)
            end)
            
            Btn.MouseLeave:Connect(function()
                Tween(Btn, {BackgroundColor3 = Theme.BG2()}, 0.2)
            end)
            
            return Btn
        end
        
        --[[
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            ğŸ”„ CREATE TOGGLE
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ]]
        
        function Tab:CreateToggle(config)
            config = config or {}
            
            local Frame = Create("Frame", {
                Parent = TabContent,
                BackgroundColor3 = Theme.BG2(),
                Size = UDim2.new(1, 0, 0, IsMobile() and 32 or 38),
                ZIndex = 4
            })
            
            Theme:Register(Frame, "Color", "BG2")
            AddCorner(Frame, 8)
            
            local Label = Create("TextLabel", {
                Parent = Frame,
                BackgroundTransparency = 1,
                Position = UDim2.new(0, IsMobile() and 10 or 12, 0, 0),
                Size = UDim2.new(1, -(IsMobile() and 60 or 70), 1, 0),
                Font = Enum.Font.GothamSemibold,
                Text = config.Name or "Toggle",
                TextColor3 = Theme.Text(),
                TextSize = IsMobile() and 12 or 13,
                TextXAlignment = Enum.TextXAlignment.Left,
                TextTruncate = Enum.TextTruncate.AtEnd,
                ZIndex = 5
            })
            
            Theme:Register(Label, "TextColor", "Text")
            
            local toggled = config.Default or false
            
            local ToggleBtn = Create("TextButton", {
                Parent = Frame,
                BackgroundColor3 = toggled and Theme.Accent() or Theme.BG3(),
                Position = UDim2.new(1, -(IsMobile() and 46 or 50), 0.5, 0),
                Size = UDim2.new(0, IsMobile() and 38 or 42, 0, 22),
                AnchorPoint = Vector2.new(0, 0.5),
                Text = "",
                AutoButtonColor = false,
                ZIndex = 5
            })
            
            Theme:Register(ToggleBtn, "Color", toggled and "Accent" or "BG3")
            AddCorner(ToggleBtn, 999)
            
            local indicatorSize = IsMobile() and 16 or 18
            
            local Indicator = Create("Frame", {
                Parent = ToggleBtn,
                BackgroundColor3 = Theme.Text(),
                Position = toggled and UDim2.new(1, -(indicatorSize + 2), 0.5, 0) or UDim2.new(0, 2, 0.5, 0),
                Size = UDim2.new(0, indicatorSize, 0, indicatorSize),
                AnchorPoint = Vector2.new(0, 0.5),
                ZIndex = 6
            })
            
            Theme:Register(Indicator, "Color", "Text")
            AddCorner(Indicator, 999)
            
            ToggleBtn.MouseButton1Click:Connect(function()
                toggled = not toggled
                ToggleBtn.BackgroundColor3 = toggled and Theme.Accent() or Theme.BG3()
                Tween(Indicator, {Position = toggled and UDim2.new(1, -(indicatorSize + 2), 0.5, 0) or UDim2.new(0, 2, 0.5, 0)}, 0.2)
                pcall(config.Callback or function() end, toggled)
                if config.Flag then
                    Drakthon.Flags[config.Flag] = toggled
                end
            end)
            
            local obj = {
                Set = function(self, val)
                    toggled = val
                    ToggleBtn.BackgroundColor3 = toggled and Theme.Accent() or Theme.BG3()
                    Indicator.Position = toggled and UDim2.new(1, -(indicatorSize + 2), 0.5, 0) or UDim2.new(0, 2, 0.5, 0)
                    if config.Flag then
                        Drakthon.Flags[config.Flag] = toggled
                    end
                end,
                Get = function(self)
                    return toggled
                end,
                Flag = config.Flag
            }
            
            if config.Flag then
                Drakthon.Flags[config.Flag] = toggled
                table.insert(Drakthon.Elements, obj)
            end
            
            return obj
        end
        
        --[[
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            ğŸ“Š CREATE SLIDER
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ]]
        
        function Tab:CreateSlider(config)
            config = config or {}
            
            local Frame = Create("Frame", {
                Parent = TabContent,
                BackgroundColor3 = Theme.BG2(),
                Size = UDim2.new(1, 0, 0, IsMobile() and 55 or 60),
                ZIndex = 4
            })
            
            Theme:Register(Frame, "Color", "BG2")
            AddCorner(Frame, 8)
            
            local Label = Create("TextLabel", {
                Parent = Frame,
                BackgroundTransparency = 1,
                Position = UDim2.new(0, IsMobile() and 10 or 12, 0, 5),
                Size = UDim2.new(1, -(IsMobile() and 70 or 80), 0, 20),
                Font = Enum.Font.GothamSemibold,
                Text = config.Name or "Slider",
                TextColor3 = Theme.Text(),
                TextSize = IsMobile() and 12 or 13,
                TextXAlignment = Enum.TextXAlignment.Left,
                TextTruncate = Enum.TextTruncate.AtEnd,
                ZIndex = 5
            })
            
            Theme:Register(Label, "TextColor", "Text")
            
            local Min = config.Min or 0
            local Max = config.Max or 100
            local Increment = config.Increment or 1
            local value = config.Default or Min
            
            local ValueBox = Create("TextLabel", {
                Parent = Frame,
                BackgroundColor3 = Theme.BG3(),
                Position = UDim2.new(1, -(IsMobile() and 58 or 65), 0, 5),
                Size = UDim2.new(0, 50, 0, 22),
                Font = Enum.Font.GothamBold,
                Text = tostring(value),
                TextColor3 = Theme.Accent(),
                TextSize = IsMobile() and 12 or 13,
                ZIndex = 5
            })
            
            Theme:Register(ValueBox, "Color", "BG3")
            Theme:Register(ValueBox, "TextColor", "Accent")
            AddCorner(ValueBox, 6)
            
            local Track = Create("Frame", {
                Parent = Frame,
                BackgroundColor3 = Theme.BG3(),
                Position = UDim2.new(0, IsMobile() and 10 or 12, 1, -18),
                Size = UDim2.new(1, -(IsMobile() and 20 or 24), 0, 5),
                ZIndex = 5
            })
            
            Theme:Register(Track, "Color", "BG3")
            AddCorner(Track, 999)
            
            local Fill = Create("Frame", {
                Parent = Track,
                BackgroundColor3 = Theme.Accent(),
                Size = UDim2.new(0, 0, 1, 0),
                ZIndex = 6
            })
            
            Theme:Register(Fill, "Color", "Accent")
            AddCorner(Fill, 999)
            
            local Dot = Create("Frame", {
                Parent = Track,
                BackgroundColor3 = Theme.Text(),
                Position = UDim2.new(0, 0, 0.5, 0),
                Size = UDim2.new(0, 14, 0, 14),
                AnchorPoint = Vector2.new(0.5, 0.5),
                ZIndex = 7
            })
            
            Theme:Register(Dot, "Color", "Text")
            AddCorner(Dot, 999)
            
            local dragging = false
            
            local function Update(val)
                value = math.clamp(math.floor((val / Increment) + 0.5) * Increment, Min, Max)
                local percent = (value - Min) / (Max - Min)
                ValueBox.Text = tostring(value)
                Fill.Size = UDim2.new(percent, 0, 1, 0)
                Dot.Position = UDim2.new(percent, 0, 0.5, 0)
                pcall(config.Callback or function() end, value)
                if config.Flag then
                    Drakthon.Flags[config.Flag] = value
                end
            end
            
            Update(value)
            
            Track.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    dragging = true
                    Tween(Dot, {Size = UDim2.new(0, 18, 0, 18)}, 0.1)
                    local percent = math.clamp((input.Position.X - Track.AbsolutePosition.X) / Track.AbsoluteSize.X, 0, 1)
                    Update(Min + (percent * (Max - Min)))
                end
            end)
            
            UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    dragging = false
                    Tween(Dot, {Size = UDim2.new(0, 14, 0, 14)}, 0.1)
                end
            end)
            
            UserInputService.InputChanged:Connect(function(input)
                if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                    local percent = math.clamp((input.Position.X - Track.AbsolutePosition.X) / Track.AbsoluteSize.X, 0, 1)
                    Update(Min + (percent * (Max - Min)))
                end
            end)
            
            local obj = {
                Set = function(self, val)
                    Update(val)
                end,
                Get = function(self)
                    return value
                end,
                Flag = config.Flag
            }
            
            if config.Flag then
                Drakthon.Flags[config.Flag] = value
                table.insert(Drakthon.Elements, obj)
            end
            
            return obj
        end
        
        --[[
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            ğŸ“ CREATE DROPDOWN - FIXED 100%
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ]]
        
        function Tab:CreateDropdown(config)
            config = config or {}
            
            local Options = config.Options or {"Option 1"}
            local CurrentOptions = {}
            for _, v in ipairs(Options) do
                table.insert(CurrentOptions, v)
            end
            
            local Container = Create("Frame", {
                Parent = TabContent,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 0, IsMobile() and 32 or 38),
                ClipsDescendants = false,
                ZIndex = 4
            })
            
            local Frame = Create("Frame", {
                Parent = Container,
                BackgroundColor3 = Theme.BG2(),
                Size = UDim2.new(1, 0, 0, IsMobile() and 32 or 38),
                ZIndex = 5
            })
            
            Theme:Register(Frame, "Color", "BG2")
            AddCorner(Frame, 8)
            
            local Btn = Create("TextButton", {
                Parent = Frame,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 1, 0),
                Text = "",
                AutoButtonColor = false,
                ZIndex = 6
            })
            
            local Label = Create("TextLabel", {
                Parent = Btn,
                BackgroundTransparency = 1,
                Position = UDim2.new(0, IsMobile() and 10 or 12, 0, 0),
                Size = UDim2.new(1, -(IsMobile() and 110 or 130), 1, 0),
                Font = Enum.Font.GothamSemibold,
                Text = config.Name or "Dropdown",
                TextColor3 = Theme.Text(),
                TextSize = IsMobile() and 12 or 13,
                TextXAlignment = Enum.TextXAlignment.Left,
                TextTruncate = Enum.TextTruncate.AtEnd,
                ZIndex = 7
            })
            
            Theme:Register(Label, "TextColor", "Text")
            
            local Selected = Create("TextLabel", {
                Parent = Btn,
                BackgroundTransparency = 1,
                Position = UDim2.new(1, -(IsMobile() and 72 or 78), 0, 0),
                Size = UDim2.new(0, IsMobile() and 55 or 60, 1, 0),
                Font = Enum.Font.Gotham,
                Text = config.Default or "...",
                TextColor3 = Theme.Accent(),
                TextSize = IsMobile() and 11 or 12,
                TextXAlignment = Enum.TextXAlignment.Right,
                TextTruncate = Enum.TextTruncate.AtEnd,
                ZIndex = 7
            })
            
            Theme:Register(Selected, "TextColor", "Accent")
            
            local Arrow = Create("TextLabel", {
                Parent = Btn,
                BackgroundTransparency = 1,
                Position = UDim2.new(1, -(IsMobile() and 14 or 16), 0, 0),
                Size = UDim2.new(0, 18, 1, 0),
                Font = Enum.Font.GothamBold,
                Text = "â–¼",
                TextColor3 = Theme.Text2(),
                TextSize = 10,
                ZIndex = 7
            })
            
            Theme:Register(Arrow, "TextColor", "Text2")
            
            local DropdownList = Create("Frame", {
                Parent = Container,
                BackgroundColor3 = Theme.BG2(),
                BorderSizePixel = 0,
                Position = UDim2.new(0, 0, 0, (IsMobile() and 32 or 38) + 4),
                Size = UDim2.new(1, 0, 0, 0),
                Visible = false,
                ClipsDescendants = false,
                ZIndex = 100
            })
            
            Theme:Register(DropdownList, "Color", "BG2")
            AddCorner(DropdownList, 8)
            AddStroke(DropdownList, Theme.BG3(), 1)
            
            local ListContainer = Create("ScrollingFrame", {
                Parent = DropdownList,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 1, 0),
                ScrollBarThickness = 3,
                ScrollBarImageColor3 = Theme.Accent(),
                CanvasSize = UDim2.new(0, 0, 0, 0),
                AutomaticCanvasSize = Enum.AutomaticSize.Y,
                BorderSizePixel = 0,
                ZIndex = 101
            })
            
            AddPadding(ListContainer, 4)
            
            Create("UIListLayout", {
                Parent = ListContainer,
                SortOrder = Enum.SortOrder.LayoutOrder,
                Padding = UDim.new(0, 3)
            })
            
            local opened = false
            local selected = config.Default
            
            local function CreateOption(opt, index)
                local OptBtn = Create("TextButton", {
                    Parent = ListContainer,
                    BackgroundColor3 = Theme.BG3(),
                    Size = UDim2.new(1, 0, 0, IsMobile() and 26 or 28),
                    Font = Enum.Font.Gotham,
                    Text = opt,
                    TextColor3 = Theme.Text(),
                    TextSize = IsMobile() and 11 or 12,
                    TextTruncate = Enum.TextTruncate.AtEnd,
                    AutoButtonColor = false,
                    ZIndex = 102,
                    LayoutOrder = index or 1
                })
                
                Theme:Register(OptBtn, "Color", "BG3")
                Theme:Register(OptBtn, "TextColor", "Text")
                AddCorner(OptBtn, 6)
                
                OptBtn.MouseButton1Click:Connect(function()
                    selected = opt
                    Selected.Text = opt
                    opened = false
                    DropdownList.Visible = false
                    Arrow.Rotation = 0
                    Container.ZIndex = 4
                    Frame.ZIndex = 5
                    Tween(DropdownList, {Size = UDim2.new(1, 0, 0, 0)}, 0.2)
                    task.wait(0.2)
                    DropdownList.Visible = false
                    pcall(config.Callback or function() end, opt)
                    if config.Flag then
                        Drakthon.Flags[config.Flag] = opt
                    end
                end)
                
                OptBtn.MouseEnter:Connect(function()
                    Tween(OptBtn, {BackgroundColor3 = Theme.Accent()}, 0.2)
                end)
                
                OptBtn.MouseLeave:Connect(function()
                    Tween(OptBtn, {BackgroundColor3 = Theme.BG3()}, 0.2)
                end)
                
                return OptBtn
            end
            
            for i, opt in ipairs(CurrentOptions) do
                CreateOption(opt, i)
            end
            
            Btn.MouseButton1Click:Connect(function()
                opened = not opened
                
                if opened then
                    Container.ZIndex = 200
                    Frame.ZIndex = 201
                    DropdownList.Visible = true
                    DropdownList.ZIndex = 202
                    Arrow.Rotation = 180
                    local maxHeight = math.min(#CurrentOptions * (IsMobile() and 29 or 31) + 8, 150)
                    Tween(DropdownList, {Size = UDim2.new(1, 0, 0, maxHeight)}, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
                else
                    Arrow.Rotation = 0
                    Container.ZIndex = 4
                    Frame.ZIndex = 5
                    Tween(DropdownList, {Size = UDim2.new(1, 0, 0, 0)}, 0.2)
                    task.wait(0.2)
                    DropdownList.Visible = false
                end
            end)
            
            local obj = {
                Set = function(self, opt)
                    if table.find(CurrentOptions, opt) then
                        selected = opt
                        Selected.Text = opt
                        if config.Flag then
                            Drakthon.Flags[config.Flag] = opt
                        end
                    end
                end,
                Get = function(self)
                    return selected
                end,
                Add = function(self, opt)
                    if not table.find(CurrentOptions, opt) then
                        table.insert(CurrentOptions, opt)
                        CreateOption(opt, #CurrentOptions)
                    end
                end,
                Remove = function(self, opt)
                    for i, v in ipairs(CurrentOptions) do
                        if v == opt then
                            table.remove(CurrentOptions, i)
                            for _, child in ipairs(ListContainer:GetChildren()) do
                                if child:IsA("TextButton") and child.Text == opt then
                                    child:Destroy()
                                    break
                                end
                            end
                            break
                        end
                    end
                end,
                Clear = function(self)
                    CurrentOptions = {}
                    for _, child in ipairs(ListContainer:GetChildren()) do
                        if child:IsA("TextButton") then
                            child:Destroy()
                        end
                    end
                    Selected.Text = "..."
                    selected = nil
                    if config.Flag then
                        Drakthon.Flags[config.Flag] = nil
                    end
                end,
                Update = function(self, newOptions)
                    self:Clear()
                    CurrentOptions = {}
                    for i, opt in ipairs(newOptions) do
                        table.insert(CurrentOptions, opt)
                        CreateOption(opt, i)
                    end
                end,
                GetOptions = function(self)
                    return CurrentOptions
                end,
                Refresh = function(self)
                    if opened then
                        opened = false
                        Arrow.Rotation = 0
                        Container.ZIndex = 4
                        Frame.ZIndex = 5
                        DropdownList.Visible = false
                        DropdownList.Size = UDim2.new(1, 0, 0, 0)
                    end
                end,
                Flag = config.Flag
            }
            
            if config.Flag then
                Drakthon.Flags[config.Flag] = selected
                table.insert(Drakthon.Elements, obj)
            end
            
            return obj
        end
        
        --[[
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            âŒ¨ï¸ CREATE INPUT
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ]]
        
        function Tab:CreateInput(config)
            config = config or {}
            
            local Frame = Create("Frame", {
                Parent = TabContent,
                BackgroundColor3 = Theme.BG2(),
                Size = UDim2.new(1, 0, 0, IsMobile() and 60 or 65),
                ZIndex = 4
            })
            
            Theme:Register(Frame, "Color", "BG2")
            AddCorner(Frame, 8)
            
            local Label = Create("TextLabel", {
                Parent = Frame,
                BackgroundTransparency = 1,
                Position = UDim2.new(0, IsMobile() and 10 or 12, 0, 5),
                Size = UDim2.new(1, -(IsMobile() and 20 or 24), 0, 20),
                Font = Enum.Font.GothamSemibold,
                Text = config.Name or "Input",
                TextColor3 = Theme.Text(),
                TextSize = IsMobile() and 12 or 13,
                TextXAlignment = Enum.TextXAlignment.Left,
                TextTruncate = Enum.TextTruncate.AtEnd,
                ZIndex = 5
            })
            
            Theme:Register(Label, "TextColor", "Text")
            
            local Input = Create("TextBox", {
                Parent = Frame,
                BackgroundColor3 = Theme.BG3(),
                Position = UDim2.new(0, IsMobile() and 10 or 12, 0, 30),
                Size = UDim2.new(1, -(IsMobile() and 20 or 24), 0, 28),
                Font = Enum.Font.Gotham,
                PlaceholderText = config.Placeholder or "Type here...",
                PlaceholderColor3 = Theme.Text2(),
                Text = config.Default or "",
                TextColor3 = Theme.Text(),
                TextSize = IsMobile() and 11 or 12,
                ClearTextOnFocus = false,
                ZIndex = 5
            })
            
            Theme:Register(Input, "Color", "BG3")
            Theme:Register(Input, "TextColor", "Text")
            AddCorner(Input, 6)
            AddPadding(Input, 8)
            
            Input.Focused:Connect(function()
                Tween(Input, {BackgroundColor3 = Color3.fromRGB(35, 35, 45)}, 0.2)
            end)
            
            Input.FocusLost:Connect(function()
                Tween(Input, {BackgroundColor3 = Theme.BG3()}, 0.2)
                pcall(config.Callback or function() end, Input.Text)
                if config.Flag then
                    Drakthon.Flags[config.Flag] = Input.Text
                end
            end)
            
            local obj = {
                Set = function(self, txt)
                    Input.Text = txt
                    if config.Flag then
                        Drakthon.Flags[config.Flag] = txt
                    end
                end,
                Get = function(self)
                    return Input.Text
                end,
                Flag = config.Flag
            }
            
            if config.Flag then
                Drakthon.Flags[config.Flag] = Input.Text
                table.insert(Drakthon.Elements, obj)
            end
            
            return obj
        end
        
        --[[
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            ğŸ“„ CREATE LABEL
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ]]
        
        function Tab:CreateLabel(text)
            local Label = Create("TextLabel", {
                Parent = TabContent,
                BackgroundColor3 = Theme.BG2(),
                Size = UDim2.new(1, 0, 0, IsMobile() and 28 or 32),
                Font = Enum.Font.Gotham,
                Text = text or "Label",
                TextColor3 = Theme.Text2(),
                TextSize = IsMobile() and 11 or 13,
                TextWrapped = true,
                ZIndex = 4
            })
            
            Theme:Register(Label, "Color", "BG2")
            Theme:Register(Label, "TextColor", "Text2")
            AddCorner(Label, 8)
            AddPadding(Label, 8)
            
            return {
                Set = function(self, txt)
                    Label.Text = txt
                end,
                Get = function(self)
                    return Label.Text
                end
            }
        end
        
        --[[
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            ğŸ“‘ CREATE SECTION
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ]]
        
        function Tab:CreateSection(name)
            local Section = Create("Frame", {
                Parent = TabContent,
                BackgroundColor3 = Theme.BG2(),
                Size = UDim2.new(1, 0, 0, IsMobile() and 30 or 35),
                ZIndex = 4
            })
            
            Theme:Register(Section, "Color", "BG2")
            AddCorner(Section, 8)
            
            local SectionLabel = Create("TextLabel", {
                Parent = Section,
                BackgroundTransparency = 1,
                Position = UDim2.new(0, IsMobile() and 10 or 12, 0, 0),
                Size = UDim2.new(1, -(IsMobile() and 20 or 24), 1, 0),
                Font = Enum.Font.GothamBold,
                Text = name or "Section",
                TextColor3 = Theme.Accent(),
                TextSize = IsMobile() and 12 or 14,
                TextXAlignment = Enum.TextXAlignment.Left,
                TextTruncate = Enum.TextTruncate.AtEnd,
                ZIndex = 5
            })
            
            Theme:Register(SectionLabel, "TextColor", "Accent")
            
            return Section
        end
        
        --[[
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            ğŸ“° CREATE PARAGRAPH
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ]]
        
        function Tab:CreateParagraph(title, content)
            local Frame = Create("Frame", {
                Parent = TabContent,
                BackgroundColor3 = Theme.BG2(),
                Size = UDim2.new(1, 0, 0, 0),
                AutomaticSize = Enum.AutomaticSize.Y,
                ZIndex = 4
            })
            
            Theme:Register(Frame, "Color", "BG2")
            AddCorner(Frame, 8)
            AddPadding(Frame, IsMobile() and 8 or 10)
            
            Create("UIListLayout", {
                Parent = Frame,
                SortOrder = Enum.SortOrder.LayoutOrder,
                Padding = UDim.new(0, 5)
            })
            
            local Title = Create("TextLabel", {
                Parent = Frame,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 0, 20),
                Font = Enum.Font.GothamBold,
                Text = title or "Title",
                TextColor3 = Theme.Accent(),
                TextSize = IsMobile() and 12 or 14,
                TextXAlignment = Enum.TextXAlignment.Left,
                TextYAlignment = Enum.TextYAlignment.Top,
                TextWrapped = true,
                ZIndex = 5
            })
            
            Theme:Register(Title, "TextColor", "Accent")
            
            local Content = Create("TextLabel", {
                Parent = Frame,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 0, 0),
                AutomaticSize = Enum.AutomaticSize.Y,
                Font = Enum.Font.Gotham,
                Text = content or "Content",
                TextColor3 = Theme.Text2(),
                TextSize = IsMobile() and 11 or 12,
                TextXAlignment = Enum.TextXAlignment.Left,
                TextYAlignment = Enum.TextYAlignment.Top,
                TextWrapped = true,
                ZIndex = 5
            })
            
            Theme:Register(Content, "TextColor", "Text2")
            
            return {
                Set = function(self, t, c)
                    if t then Title.Text = t end
                    if c then Content.Text = c end
                end
            }
        end
        
        table.insert(Window.Tabs, Tab)
        
        if #Window.Tabs == 1 then
            task.delay(0.1, function()
                TabBtn.MouseButton1Click:Fire()
            end)
        end
        
        return Tab
    end
    
    table.insert(self.Windows, Window)
    return Window
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ‰ LIBRARY LOADED
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âœ… Drakthon UI Library V" .. Drakthon.Version .. " Loaded!")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("ğŸ“Œ Version: " .. Drakthon.Version)
print("ğŸ‘¨â€ğŸ’» Author: " .. Drakthon.Author)
print("ğŸŒ GitHub: https://github.com/fisal-new/Drakthonlib")
print("ğŸ¨ Themes: " .. table.concat(Theme:List(), ", "))
print("ğŸ“± Device: " .. GetDeviceType())
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

return Drakthon
